"use strict";(globalThis["webpackChunkapp_telos_net"]=globalThis["webpackChunkapp_telos_net"]||[]).push([[754],{55754:(e,a,t)=>{t.r(a),t.d(a,{default:()=>I});var s=t(59835);function i(e,a,t,i,l,o){const n=(0,s.up)("sign-up-form");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(n)])}var l=t(86970);const o={class:"row justify-center items-center"},n={class:"col-xs-11 col-md-8 q-gutter-y-md q-pa-md"},r={class:"text-h4 q-pl-md"},u={class:"column items-center q-gutter-y-md"},d={class:"text-h4 q-pl-md"},m={class:"small-margin"},p={class:"text-weight-thin small-margin"};function h(e,a,t,i,h,c){const g=(0,s.up)("q-uploader"),b=(0,s.up)("q-dialog"),f=(0,s.up)("profile-avatar"),v=(0,s.up)("q-btn"),w=(0,s.up)("q-card-section"),U=(0,s.up)("q-input"),y=(0,s.up)("q-editor"),S=(0,s.up)("q-form");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",n,[(0,s.Wm)(b,{modelValue:h.showUpload,"onUpdate:modelValue":a[0]||(a[0]=e=>h.showUpload=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{label:"Upload image to Imgur",url:"https://api.imgur.com/3/image",accept:".jpg, image/*","field-name":"image",headers:[h.authHeader],onUploaded:c.imageUploaded},null,8,["headers","onUploaded"])])),_:1},8,["modelValue"]),(0,s.Wm)(S,{class:"q-gutter-y-md",onSubmit:c.onSubmit,onReset:c.onReset},{default:(0,s.w5)((()=>[(0,s._)("div",r,(0,l.zw)(c.headerText),1),(0,s.Wm)(w,null,{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.Wm)(f,{size:"200px",avatar:h.avatar,account:e.account},null,8,["avatar","account"]),(0,s._)("div",d,(0,l.zw)(e.account),1),(0,s.Wm)(v,{disable:!e.isAuthenticated,label:"Upload image",color:"primary",onClick:a[1]||(a[1]=e=>h.showUpload=!0)},null,8,["disable"])])])),_:1}),(0,s.Wm)(U,{disable:!e.isAuthenticated,counter:"",maxlength:"128",filled:"",modelValue:h.avatar,"onUpdate:modelValue":a[2]||(a[2]=e=>h.avatar=e),label:e.$t("pages.signUp.form.avatar")},null,8,["disable","modelValue","label"]),(0,s.Wm)(U,{disable:!e.isAuthenticated,counter:"",maxlength:"16",filled:"",modelValue:h.name,"onUpdate:modelValue":a[3]||(a[3]=e=>h.name=e),label:e.$t("pages.signUp.form.name"),"lazy-rules":"",rules:[a=>a&&a.length>0||e.$t("forms.errors.required")]},null,8,["disable","modelValue","label","rules"]),(0,s.Wm)(U,{disable:!e.isAuthenticated,counter:"",maxlength:"16",filled:"",modelValue:h.status,"onUpdate:modelValue":a[4]||(a[4]=e=>h.status=e),label:e.$t("pages.signUp.form.status"),"lazy-rules":"",rules:[a=>a&&a.length>0||e.$t("forms.errors.required")]},null,8,["disable","modelValue","label","rules"]),(0,s._)("div",m,[(0,s._)("p",p,(0,l.zw)(e.$t("pages.signUp.form.presentation")),1),(0,s.Wm)(y,{disable:!e.isAuthenticated,modelValue:h.bio,"onUpdate:modelValue":a[5]||(a[5]=e=>h.bio=e),"min-height":"5rem"},null,8,["disable","modelValue"])]),(0,s.Wm)(v,{disable:!e.isAuthenticated,label:e.$t("pages.signUp.form.btnSave"),type:"submit",color:"primary"},null,8,["disable","label"])])),_:1},8,["onSubmit","onReset"])])])}t(18964);var c=t(33100),g=t(64489);const b={name:"SignUpForm",components:{ProfileAvatar:g.Z},data(){return{identity:"",avatar:"",name:"",status:"",bio:"",url:"",showUpload:!1,authHeader:{name:"Authorization",value:"Client-ID b6f46df9d1da9d9"}}},computed:{...(0,c.Se)("accounts",["isAuthenticated","account"]),headerText(){return this.isAuthenticated?this.myProfile?"Edit your profile":"Setup your profile":"Login to manage your profile"},myProfile(){return this.$store.state.profiles.myProfile},presentationSanitized(){let e=this.bio;return e=e.replace(/script/gi,""),e=e.replace(/<a/gi,""),e=e.replace(/href/gi,""),e}},beforeMount:async function(){this.showIsLoading(!0);const e=await this.getProfile();void 0!==e&&(this.avatar=e.avatar,this.name=e.display_name,this.bio=e.bio,this.status=e.status),this.showIsLoading(!1)},methods:{...(0,c.nv)("profiles",["signUp","searchProfiles","getProfile"]),onSubmit(){this.doSignup()},async doSignup(){this.showIsLoading(!0);const e={display_name:this.name,bio:this.presentationSanitized,avatar:this.avatar,status:this.status};try{this.showIsLoading(!0),await this.signUp(e),this.showSuccessMsg("Submited"),await this.getProfile(),this.showIsLoading(!1),this.$router.push({name:"myProfile"})}catch(a){this.showIsLoading(!1),this.showErrorMsg(a.message)}},imageUploaded(e){const a=JSON.parse(e.xhr.response);this.avatar=a.data.link,this.showUpload=!1},onReset(){this.avatar=null,this.name=null,this.age=null}}};var f=t(11639),v=t(32074),w=t(97534),U=t(8326),y=t(63190),S=t(68879),q=t(13119),V=t(67699),_=t(69984),W=t.n(_);const x=(0,f.Z)(b,[["render",h]]),A=x;W()(b,"components",{QDialog:v.Z,QUploader:w.Z,QForm:U.Z,QCardSection:y.Z,QBtn:S.Z,QInput:q.Z,QEditor:V.Z});const Z={name:"SignUp",components:{SignUpForm:A}},z=(0,f.Z)(Z,[["render",i]]),I=z}}]);