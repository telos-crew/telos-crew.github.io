(globalThis["webpackChunkapp_telos_net"]=globalThis["webpackChunkapp_telos_net"]||[]).push([[929],{69342:(e,t,r)=>{"use strict";r.d(t,{U:()=>s});r(40702);var a=r(33100);const o=new RegExp(/Qm[1-9A-HJ-NP-Za-km-z]{44}(\/.*)?/,"m"),s={data(){return{rules:{accountExists:async e=>!await this.isAccountFree(e.toLowerCase())||this.$t("forms.errors.accountNotExists",{account:e}),accountFormat:e=>/^([a-z]|[1-5]|.){1,12}$/.test(e.toLowerCase())||this.$t("forms.errors.accountFormat"),accountFormatBasic:e=>/^([a-z]|[1-5]){12}$/.test(e.toLowerCase())||this.$t("forms.errors.accountFormatBasic"),accountLength:e=>e.length<=12||this.$t("forms.errors.accountLength"),dateFuture:e=>t=>new Date(t).getTime()>=new Date(e).getTime()||this.$t("forms.errors.dateFuture"),greaterOrEqualThan:e=>t=>t>=e||this.$t("forms.errors.greaterOrEqualThan",{value:e}),minimumOptions:e=>t=>t.length>=e||this.$t("forms.errors.greaterOrEqualThan",{value:e}),isAccountAvailable:async e=>await this.isAccountFree(e.toLowerCase())||this.$t("forms.errors.accountNotAvailable",{account:e}),isInteger:e=>Number.isInteger(parseInt(e))||this.$t("forms.errors.integer"),isToken:e=>e.length>=2&&e.length<=6||this.$t("forms.errors.token"),isTokenDecimals:e=>parseInt(e)>=0&&parseInt(e)<=9||this.$t("forms.errors.tokenDecimals"),positiveInteger:e=>parseInt(e)>0||this.$t("forms.errors.positiveInteger"),isValidIPFShash:e=>e.match(o)||"Invalid IPFS HASH format",required:e=>!!e||this.$t("forms.errors.required")}}},methods:{...(0,a.nv)("accounts",["isAccountFree"]),async validate(e){if(!e)return!0;for await(const t of Object.keys(e))this.$refs[t]&&await this.$refs[t].validate();return Object.keys(e).reduce(((e,t)=>e&&(!this.$refs[t]||!this.$refs[t].hasError)),!0)},resetValidation(e){e&&Object.keys(e).forEach((e=>this.$refs[e]&&this.$refs[e].resetValidation()))}}}},6338:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r(59835),o=r(86970),s=r(61957);const c={class:"flex column send-otp"},n={class:"col-9"},i={class:"text-red"},l={key:0,class:"text-red"},u={class:"col-3"},d={class:"hint"};function p(e,t,r,p,m,h){const f=(0,a.up)("q-input"),y=(0,a.up)("q-card-section"),g=(0,a.up)("q-btn"),b=(0,a.up)("q-checkbox"),v=(0,a.up)("vue-recaptcha"),w=(0,a.up)("q-card");return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("div",n,[(0,a.wy)((0,a.Wm)(w,{class:"q-mb-lg",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a._)("h2",null,(0,o.zw)(e.$t("pages.accounts.add.createAccountTitle")),1),(0,a.Wm)(f,{class:"q-mb-lg",ref:"account",modelValue:m.form.account,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form.account=e),color:"accent",label:e.$t("pages.accounts.add.forms.account"),hint:e.$t("pages.accounts.add.forms.accountHint"),outlined:"",maxlength:"12",rules:[e.rules.required,e.rules.accountFormatBasic,e.rules.accountLength,e.rules.isAccountAvailable],"lazy-rules":"",debounce:200,onBlur:t[1]||(t[1]=e=>m.form.account=(m.form.account||"").toLowerCase())},null,8,["modelValue","label","hint","rules"])])),_:1}),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a._)("div",i,(0,o.zw)(e.$t("pages.accounts.add.saveKeys")),1),(0,a._)("div",null,[(0,a.Wm)(f,{ref:"publicKey",modelValue:m.form.publicKey,"onUpdate:modelValue":t[3]||(t[3]=e=>m.form.publicKey=e),label:"Public Key",rules:[()=>m.copy||e.$t("forms.errors.copyKey")],type:"textarea",readonly:"",autogrow:"","lazy-rules":"",onClick:t[4]||(t[4]=t=>e.$refs["publicKey"].select())},{after:(0,a.w5)((()=>[(0,a.Wm)(g,{round:"",color:"primary",icon:"fas fa-clipboard",size:"sm",onClick:t[2]||(t[2]=()=>{e.copyToClipboard(m.form.publicKey),e.setSuccessMsg(e.$t("pages.accounts.add.keyCopyClipboard"))})})])),_:1},8,["modelValue","rules"]),(0,a.Wm)(f,{ref:"privateKey",modelValue:m.form.privateKey,"onUpdate:modelValue":t[6]||(t[6]=e=>m.form.privateKey=e),label:"Private Key",rules:[()=>m.copy||e.$t("forms.errors.copyKey")],readonly:"",type:"textarea",autogrow:"","lazy-rules":"",onClick:t[7]||(t[7]=t=>e.$refs["privateKey"].select())},{after:(0,a.w5)((()=>[(0,a.Wm)(g,{round:"",color:"primary",icon:"fas fa-clipboard",size:"sm",onClick:t[5]||(t[5]=()=>{e.copyToClipboard(m.form.privateKey),e.setSuccessMsg(e.$t("pages.accounts.add.keyCopyClipboard"))})})])),_:1},8,["modelValue","rules"])]),(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{modelValue:m.copy,"onUpdate:modelValue":t[8]||(t[8]=e=>m.copy=e),label:"I have copied my keys somewhere safe"},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,{ref:"recaptcha",sitekey:"6Ld-_eIZAAAAAF6JsrFudo_uQjRL4eqPAZE40I3o",onVerify:h.onVerify,onExpired:h.onExpire},null,8,["onVerify","onExpired"]),m.error&&!m.generating?((0,a.wg)(),(0,a.iD)("div",l,(0,o.zw)(m.error),1)):(0,a.kq)("",!0),(0,a._)("div",u,[(0,a._)("div",d,(0,o.zw)(e.$t("pages.accounts.add.verifyAccountHint")),1),(0,a.Wm)(g,{class:"full-width",color:"primary",label:e.$t("pages.accounts.add.buttons.continue"),size:"lg",unelevated:"",loading:m.submitting,onClick:h.onCreateAccount},null,8,["label","loading","onClick"])])])),_:1})])),_:1},512),[[s.F8,!m.generating]])])])}var m=r(33100),h=r(69342),f=r(91530),y=r(65211);const g=async()=>{const e=await y.b.randomKey(void 0,{secureEnv:!0}),t=await y.b.privateToPublic(e);return{privateKey:e,publicKey:t}},b={name:"CreateAccount",mixins:[h.U],data(){return{form:{account:null,recaptchaResponse:null,publicKey:null,privateKey:null},recaptcha:!1,generating:!1,error:null,submitting:!1,copy:!1}},async mounted(){this.generating=!0;const e=await g();this.form.privateKey=e.privateKey,this.form.publicKey=e.publicKey,this.generating=!1;let t=document.createElement("script");t.setAttribute("src","https://www.google.com/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit"),document.head.appendChild(t)},methods:{...(0,m.nv)("accounts",["createAccount"]),async onCreateAccount(){if(this.resetValidation(this.form),this.error=null,await this.validate(this.form)){if(this.recaptcha){this.submitting=!0;const{success:e,error:t}=await this.createAccount(this.form);e?this.$router.push({path:"/accounts/add/congratulations"}):this.error=t,this.submitting=!1}else this.error="Please complete reCaptcha";this.submitting=!1}},async onVerify(e){e&&(this.recaptcha=!0,this.form.recaptchaResponse=e,this.error=null)},onExpire:function(){this.recaptcha=!1,this.recaptchaResponse=null}},components:{"vue-recaptcha":f.Z}};var v=r(11639),w=r(44458),$=r(63190),C=r(13119),k=r(68879),A=r(11221),K=r(32259),V=r(18149),_=r(69984),x=r.n(_);const F=(0,v.Z)(b,[["render",p],["__scopeId","data-v-db425136"]]),I=F;x()(b,"components",{QCard:w.Z,QCardSection:$.Z,QInput:C.Z,QBtn:k.Z,QCheckbox:A.Z,QSelect:K.Z,QField:V.Z})},51238:()=>{}}]);