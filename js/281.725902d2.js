"use strict";(globalThis["webpackChunkapp_telos_net"]=globalThis["webpackChunkapp_telos_net"]||[]).push([[281],{28281:(t,e,i)=>{i.r(e),i.d(e,{default:()=>K});var s=i(59835),a=i(61957),o=i(86970);const n={class:"q-pa-md infiniteScroll",ref:"scrollTargetRef"},l={slot:"loading"},c={class:"row justify-center q-my-md"},r={slot:"default"},p={class:"row justify-center q-my-md"},u={class:"text-weight-thin"},m={class:"row justify-center"},d={class:"col-xs-10 col-sm-8 col-md-6"};function f(t,e,i,f,h,w){const _=(0,s.up)("q-btn"),g=(0,s.up)("q-input"),v=(0,s.up)("q-spinner"),y=(0,s.up)("ContactItem"),L=(0,s.up)("q-list"),b=(0,s.up)("q-infinite-scroll");return(0,s.wg)(),(0,s.iD)("main",null,[(0,s.Wm)(g,{class:"send-input",onKeypress:(0,a.D2)(w.onSearch,["enter"]),"bottom-slots":"",modelValue:h.search,"onUpdate:modelValue":e[0]||(e[0]=t=>h.search=t),label:t.$t("pages.general.search")},{append:(0,s.w5)((()=>[(0,s.Wm)(_,{round:"",dense:"",flat:"",icon:"search",onClick:w.onSearch},null,8,["onClick"])])),_:1},8,["onKeypress","modelValue","label"]),(0,s._)("div",n,[(0,s.Wm)(b,{onLoad:w.onLoad,offset:250,"scroll-target":t.$refs.scrollTargetRef,ref:"infiniteScroll"},{default:(0,s.w5)((()=>[(0,s._)("template",l,[(0,s._)("div",c,[(0,s.Wm)(v,{color:"primary",name:"dots",size:"40px"})])]),(0,s._)("template",r,[(0,s.wy)((0,s._)("div",p,[(0,s._)("p",u,(0,o.zw)(t.$t("pages.general.defaultContactList")),1)],512),[[a.F8,0===w.profileList.items.length&&!h.isLoading]])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(w.profileList.items,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{class:"caption q-py-sm",key:e},[(0,s._)("div",m,[(0,s._)("div",d,[(0,s.Wm)(L,{bordered:""},{default:(0,s.w5)((()=>[(0,s.Wm)(y,{contact:t},null,8,["contact"])])),_:2},1024)])])])))),128))])),_:1},8,["onLoad","scroll-target"])],512)])}function h(t,e,i,a,n,l){const c=(0,s.up)("profile-avatar"),r=(0,s.up)("q-item-section"),p=(0,s.up)("q-item-label"),u=(0,s.up)("q-item"),m=(0,s.up)("q-card"),d=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(m,{class:(0,o.C_)({own:l.isOwn})},{default:(0,s.w5)((()=>[(0,s.wy)(((0,s.wg)(),(0,s.j4)(u,{class:"q-pa-md",clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{avatar:"",clickable:"",onClick:l.goToProfileDetail},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{size:"80px",avatar:i.contact.avatar,account:i.contact.account_name},null,8,["avatar","account"])])),_:1},8,["onClick"]),(0,s.Wm)(r,{clickable:"",onClick:l.goToProfileDetail},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(i.contact.account_name),1)])),_:1}),(0,s.Wm)(p,{caption:"",lines:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(i.contact.display_name),1)])),_:1}),(0,s.Wm)(p,{caption:"",lines:"1",innerHTML:`Bio: ${i.contact.bio}`},null,8,["innerHTML"]),(0,s.Wm)(p,{caption:"",lines:"1"},{default:(0,s.w5)((()=>[(0,s.Uk)("Status: "+(0,o.zw)(i.contact.status),1)])),_:1})])),_:1},8,["onClick"])])),_:1})),[[d]])])),_:1},8,["class"])}var w=i(64489),_=i(29381),g=i.n(_);const v={name:"ContactItem",components:{ProfileAvatar:w.Z},props:{contact:Object},computed:{isOwn(){return!(!this.$store.state.profiles.myProfile||this.$store.state.profiles.myProfile.account_name!==this.contact.account_name)},accountHash(){return g()(this.contact.account_name)}},methods:{goToChat(){this.$store.commit("messages/setActiveChat",{activeChat:this.contact.eosAccount,avatarImage:this.contact.publicData.avatarImage,s3Identity:this.contact.publicData.s3Identity}),this.$router.push({name:"chat"})},goToProfileDetail(){this.$store.commit("profiles/setSelectedProfile",this.contact),this.isOwn?this.$router.push({name:"myProfile"}):this.$router.push({name:"profileDetail"})},goToEditOwnProfile(){this.$router.push({path:"/profiles/myProfile/add"})}}};var y=i(11639),L=i(44458),b=i(490),C=i(76749),k=i(33115),$=i(51722),P=i(69984),q=i.n(P);const I=(0,y.Z)(v,[["render",h],["__scopeId","data-v-433db113"]]),S=I;q()(v,"components",{QCard:L.Z,QItem:b.Z,QItemSection:C.Z,QItemLabel:k.Z}),q()(v,"directives",{Ripple:$.Z});var W=i(33100);const Z={name:"ContactList",components:{ContactItem:S},data(){return{search:"",limit:10,isLoading:!0,isFirst:!0}},computed:{profileList(){return this.$store.state.profiles.profilesList}},watch:{search(){this.isFirst=!0}},beforeUnmount:function(){this.clearProfilesList()},methods:{...(0,W.nv)("profiles",["searchProfiles","clearProfilesList"]),async onLoad(t,e){this.isFirst||void 0!==this.profileList.lastEvaluatedKey&&this.profileList.count===this.limit?(this.isFirst=!1,this.isLoading=!0,await this.searchProfiles({search:this.search,limit:this.limit,lastEvaluatedKey:this.profileList.lastEvaluatedKey}),this.isLoading=!1,e()):this.$refs.infiniteScroll.stop()},async onSearch(t){this.clearProfilesList(),this.isFirst=!0,this.$refs.infiniteScroll.reset(),this.$refs.infiniteScroll.resume(),this.$refs.infiniteScroll.poll()}}};var T=i(13119),D=i(68879),Q=i(86870),j=i(13902),z=i(13246);const F=(0,y.Z)(Z,[["render",f],["__scopeId","data-v-30874c60"]]),K=F;q()(Z,"components",{QInput:T.Z,QBtn:D.Z,QInfiniteScroll:Q.Z,QSpinner:j.Z,QList:z.Z})}}]);